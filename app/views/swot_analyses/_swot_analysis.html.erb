<div class="card shadow-lg m-4 card-profile">
  <div class="card-body p-3">
    <div class="row gx-4">
      <div class="col-auto">
        <div class="avatar avatar-xl position-relative">
          <%= image_tag 'th.jpg', alt: "profile_image", class: "w-100 border-radius-lg shadow-sm" %>
        </div>
      </div>
      <div class="col-auto my-auto">
        <div class="h-100">
          <h5 class="mb-1">
            <%= @business_idea.title %>
          </h5>
          <p class="mb-0 font-weight-bold text-sm">
            SWOT matrix
          </p>
        </div>
      </div>
      <div class="col-lg-8 col-md-8 my-sm-auto ms-sm-auto me-sm-0 mx-auto mt-3">
        <div class="nav-wrapper position-relative end-0">
          <ul class="nav nav-pills nav-fill p-1" role="tablist">
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 active d-flex align-items-center justify-content-center " id="nav-strength-tab" data-bs-toggle="tab" data-bs-target="#nav-strength" href="javascript:;" role="tab" aria-selected="true">
                <i class="fa-solid fa-thumbs-up"></i>
                <span class="ms-2">Strengths</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center " id="nav-weaknesses-tab" data-bs-toggle="tab" data-bs-target="#nav-weaknesses" href='#' role="tab" aria-selected="false">
                <i class="fa-solid fa-thumbs-down"></i>
                <span class="ms-2">Weaknesses</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center "  id="nav-opportunities-tab" data-bs-toggle="tab" data-bs-target="#nav-opportunities" href="javascript:;" role="tab" aria-selected="false">
                <i class="fa-solid fa-chart-line"></i>
                <span class="ms-2">Opportunities</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 d-flex align-items-center justify-content-center "  id="nav-threats-tab" data-bs-toggle="tab" data-bs-target="#nav-threats" href="javascript:;" role="tab" aria-selected="false">
                <i class="fa-solid fa-triangle-exclamation"></i>
                <span class="ms-2">Threats</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="card shadow-lg mx-4 my-2">
  <div class="tab-content" id="nav-tabContent">
    <%# To jest powtarzajace sie %>
    <div class="tab-pane fade show active" id="nav-strength" role="tabpanel" aria-labelledby="nav-strength-tab">
      <div class="container-fluid py-4">
        <div class="row">
          <div class="col">
            <fieldset class="border rounded-3 p-3">
              <legend class="float-none w-auto px-3">Strengths:</legend>
              <%# swot_analysis.strengths %>
              <%= format_text_to_html swot_analysis.strengths %>
              <br/>
              <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
                <%= hidden_field_tag :type, "strengths" %> 
                <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
              <% end %>
            </fieldset>
          </div>
        </div>
      </div>
    </div>
    <%# Koniec powtarzania %>
    <div class="tab-pane fade show" id="nav-weaknesses" role="tabpanel" aria-labelledby="nav-weaknesses-tab">
      <div class="container-fluid py-4">
        <div class="row">
          <div class="col">
            <fieldset class="border rounded-3 p-3"> 
              <legend class="float-none w-auto px-3">Weaknesses:</legend>
              <%# swot_analysis.weaknesses %>
              <%= format_text_to_html swot_analysis.weaknesses %>
              <br/>
              <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
                <%= hidden_field_tag :type, "weaknesses" %> 
                <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
              <% end %>
            </fieldset>
          </div>
        </div>
      </div>
    </div>


    <div class="tab-pane fade show" id="nav-opportunities" role="tabpanel" aria-labelledby="nav-opportunities-tab">
      <div class="container-fluid py-4">
        <div class="row">
          <div class="col">
            <fieldset class="border rounded-3 p-3">
              <legend class="float-none w-auto px-3">Opportunities:</legend>
              <%#swot_analysis.opportunities %>
              <%= format_text_to_html swot_analysis.opportunities %>
              <br/>
              <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
                <%= hidden_field_tag :type, "opportunities" %> 
                <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
              <% end %>
            </fieldset>          
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane fade show" id="nav-threats" role="tabpanel" aria-labelledby="nav-threats-tab">
      <div class="container-fluid py-4">
        <div class="row">
          <div class="col">
            <fieldset class="border rounded-3 p-3">
              <legend class="float-none w-auto px-3">Threats:</legend>
              <%# swot_analysis.threats %>
              <%= format_text_to_html swot_analysis.threats %>
              <br/>
              <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
                <%= hidden_field_tag :type, "threats" %> 
                <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
              <% end %>
            </fieldset>         
          </div>
        </div>
      </div>
    </div>

    <%# petla %>
  </div>
</div>


<div id="<%= dom_id swot_analysis %>">
  <div class="card-header">
    <strong>Business idea:</strong>
    <%= swot_analysis.business_idea.title %>
  </div>

  <div class="card-body">
    <fieldset class="border rounded-3 p-3">
      <legend class="float-none w-auto px-3">Strengths:</legend>
      <%# swot_analysis.strengths %>
      <%= format_text_to_html swot_analysis.strengths %>
      <br/>
      <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
        <%= hidden_field_tag :type, "strengths" %> 
        <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
      <% end %>
    </fieldset>

    <fieldset class="border rounded-3 p-3"> 
      <legend class="float-none w-auto px-3">Weaknesses:</legend>
      <%# swot_analysis.weaknesses %>
      <%= format_text_to_html swot_analysis.weaknesses %>
      <br/>
      <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
        <%= hidden_field_tag :type, "weaknesses" %> 
        <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
      <% end %>
    </fieldset>

    <fieldset class="border rounded-3 p-3">
      <legend class="float-none w-auto px-3">Opportunities:</legend>
      <%#swot_analysis.opportunities %>
      <%= format_text_to_html swot_analysis.opportunities %>
      <br/>
      <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
        <%= hidden_field_tag :type, "opportunities" %> 
        <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
      <% end %>
    </fieldset>

    <fieldset class="border rounded-3 p-3">
      <legend class="float-none w-auto px-3">Threats:</legend>
      <%# swot_analysis.threats %>
      <%= format_text_to_html swot_analysis.threats %>
      <br/>
      <%= form_with url: "/business_ideas/#{@business_idea.id}/swot_analyses", local: true, method: :patch, data: { turbo: "false" } do %>
        <%= hidden_field_tag :type, "threats" %> 
        <%= submit_tag "Get AI Suggestions", class: "btn btn-outline-secondary" %>
      <% end %>
    </fieldset>
  </div>
</div>
