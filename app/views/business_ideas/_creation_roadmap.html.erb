<div class="row">
  <div class="stepper-container">
    <%= render 'business_ideas/stepper' %>
  </div>
  <div class="col-md-3">
    <%= render 'timeline' %>
  </div>


  <div class="col-md-9">
    <div class="tab-content-road-map tab-content">
      <div class="tab-pane-road-map tab-pane fade show active" id="business_idea_definition">
        <%= render @business_idea.business_idea_definition %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="business_idea_definition">
        <%= render @business_idea.business_idea_definition %>
      </div>
      
      <div class="tab-pane-road-map tab-pane fade" id="market_research">
        <%= render @business_idea.market_research %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="competitor_analysis">
        <%= render @business_idea.competitor_analysis %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="business_model_definition">
        <%= render @business_idea.business_model_canva %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="strategy_development">
        <%= render @business_idea.business_idea_definition %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="financial_planning">
        <%= render @business_idea.business_idea_definition %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="legal_&_operations">
        <%= render @business_idea.market_research %>
      </div>

      <div class="tab-pane-road-map tab-pane fade" id="business_plan_finalization">
        <%= render @business_idea.market_research %>
      </div>
    </div>
  </div>
</div>
<!--
<%= javascript_tag do %>
document.addEventListener('DOMContentLoaded', function () {
  const urlParams = new URLSearchParams(window.location.search);
  const stage = urlParams.get('stage');

  if (stage) {
    // First click roadmap tab
    const roadmapTab = document.querySelector('#nav-creation-roadmap-tab');
    if (roadmapTab) {
      roadmapTab.click(); // ðŸ‘ˆ activates roadmap tab
    }

    // Then show the specific stage tab
    const targetPane = document.querySelector(`#${stage}`);
    const allTabs = document.querySelectorAll('.tab-pane-road-map');
    if (targetPane) {
      allTabs.forEach(tab => tab.classList.remove('show', 'active'));
      targetPane.classList.add('show', 'active');

      // Wizard init
      const wizard = targetPane.querySelector('.multisteps-form');
      if (wizard && !wizard.dataset.initialized) {
        wizard.dataset.initialized = true;
        initializeMultiStepForm(wizard);
        console.log(`Wizard for ${stage} initialized`);
      }
    }
  }
});
<% end %>
-->
<%= javascript_tag do %>
document.addEventListener('DOMContentLoaded', function () {
  const tabPaneSelector = '.tab-pane-road-map';
  const contentArea = document.querySelector('.tab-content-road-map');
  if (!contentArea) return;

  const allTabs = contentArea.querySelectorAll(tabPaneSelector);

  document.querySelectorAll('[data-target-stage]').forEach(button => {
    button.addEventListener('click', (e) => {
      e.preventDefault();

      const targetId = button.getAttribute('data-target-stage');
      const targetPane = document.querySelector(`#${targetId}`);
      if (!targetPane) return;

      allTabs.forEach(tab => tab.classList.remove('show', 'active'));
      targetPane.classList.add('show', 'active');

      const wizard = targetPane.querySelector('.multisteps-form');
      if (wizard && !wizard.dataset.initialized) {
        wizard.dataset.initialized = true;
        initializeMultiStepForm(wizard); // Now available globally! ðŸ’ª
        console.log(`Wizard in ${targetId} initialized`);
      }
    });
  });
});
<% end %>


